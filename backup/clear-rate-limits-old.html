<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Clear Form Rate Limits - WebGlo</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-100 p-8">
    <div class="max-w-md mx-auto bg-white p-6 rounded-lg shadow-lg">
        <h1 class="text-2xl font-bold mb-6 text-center">Clear Form Rate Limits</h1>
        
        <div class="space-y-4">
            <button onclick="clearContactRateLimit()" class="w-full bg-blue-600 text-white p-3 rounded-lg hover:bg-blue-700">
                Clear Contact Form Rate Limit
            </button>
            
            <button onclick="clearNewsletterRateLimit()" class="w-full bg-green-600 text-white p-3 rounded-lg hover:bg-green-700">
                Clear Newsletter Rate Limit
            </button>
            
            <button onclick="clearAllRateLimits()" class="w-full bg-red-600 text-white p-3 rounded-lg hover:bg-red-700">
                Clear All Rate Limits
            </button>
            
            <button onclick="testGoogleScript()" class="w-full bg-purple-600 text-white p-3 rounded-lg hover:bg-purple-700">
                Test Google Apps Script
            </button>
        </div>
        
        <div class="mt-6 p-4 bg-gray-100 rounded-lg">
            <h3 class="font-bold mb-2">Status</h3>
            <div id="status" class="text-sm text-gray-600">Ready</div>
        </div>
        
        <div class="mt-4 text-center">
            <a href="contact.html" class="text-blue-600 hover:underline">Test Contact Form</a> | 
            <a href="blog.html" class="text-blue-600 hover:underline">Test Newsletter</a>
        </div>
    </div>

    <script>
        function updateStatus(message) {
            document.getElementById('status').textContent = message;
            console.log(message);
        }
        
        function clearContactRateLimit() {
            localStorage.removeItem('webglo_contact_submission');
            updateStatus('Contact form rate limit cleared ✅');
        }
        
        function clearNewsletterRateLimit() {
            localStorage.removeItem('webglo_newsletter_submission');
            updateStatus('Newsletter rate limit cleared ✅');
        }
        
        function clearAllRateLimits() {
            localStorage.removeItem('webglo_contact_submission');
            localStorage.removeItem('webglo_newsletter_submission');
            updateStatus('All rate limits cleared ✅');
        }
        
        async function testGoogleScript() {
            updateStatus('Testing Google Apps Script...');
            
            try {
                const response = await fetch('https://script.google.com/macros/s/AKfycbwWN1BeKpgcerWlH4iNYQnI1oPvF7sTbXBa7srdSKVubEd1esKn4qlDqDimPiUUH6n2PQ/exec', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({
                        formType: 'test',
                        timestamp: new Date().toISOString(),
                        data: {
                            test: 'connection'
                        },
                        source: window.location.href,
                        userAgent: navigator.userAgent
                    })
                });
                
                const result = await response.json();
                
                if (result.success) {
                    updateStatus(`Google Apps Script test PASSED ✅ (ID: ${result.id})`);
                } else {
                    updateStatus(`Google Apps Script test FAILED ❌ (${result.error})`);
                }
            } catch (error) {
                updateStatus(`Google Apps Script test FAILED ❌ (${error.message})`);
            }
        }
        
        // Auto-clear rate limits on page load
        clearAllRateLimits();
    </script>
</body>
</html>
